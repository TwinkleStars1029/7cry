<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>地府求職模式（抽屜設定）</title>
<style>
  /* ====== 主題色（可由 select 切換） ====== */
  :root{
    --brand:#ff7f50; /* 橘色 */
    --ink:#2b2b2b;
    --muted:#6b7280;
    --panel:#fffaf7;
    --chip:#ffe8df;
    --border:#e6a892;
    --danger:#e54b4b;
    --bubble-left:#f1f5f9;
    --bubble-right:#ffe8df;
  }
  .theme-orange{ --brand:#ff7f50; --chip:#ffe8df; --border:#e6a892; }
  .theme-blue  { --brand:#3b82f6; --chip:#e6efff; --border:#a9c7ff; }
  .theme-green { --brand:#22c55e; --chip:#e6ffe9; --border:#a6e8bb; }
  .theme-purple{ --brand:#a855f7; --chip:#f3e8ff; --border:#d5b5ff; }

  *{box-sizing:border-box}
  body{
    margin:0;background:#f0f2f5;
    font:14px/1.6 ui-sans-serif,system-ui,-apple-system,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;
    display:grid;place-items:center;padding:16px;
  }
  .app{
    width:min(420px,100vw); height:min(760px,100vh - 24px);
    background:var(--panel); border:1px solid var(--border); border-radius:16px;
    box-shadow:0 10px 30px rgba(0,0,0,.08); overflow:hidden; position:relative;
    display:grid; grid-template-rows:auto auto 1fr auto;
  }

  /* ====== Header ====== */
  .header{
    background:linear-gradient(180deg,#ffd6c7 0%, #ffd6c780 100%);
    padding:8px 10px; display:flex; align-items:center; gap:8px; position:relative;
    border-bottom:1px solid var(--border);
  }
  .badge{display:flex;align-items:center;gap:6px;background:#fff; border:1px solid var(--border);
    padding:4px 10px;border-radius:999px;box-shadow:inset 0 -1px 0 rgba(0,0,0,.03)}
  .badge .status-icon{width:18px;height:18px;display:grid;place-items:center;border-radius:50%;
    background:var(--chip); border:1px solid var(--border); font-size:12px}
  .mode-text{font-weight:700}
  .coins{margin-left:auto; display:flex; align-items:center; gap:6px;
    background:#fff; border:1px solid var(--border); padding:4px 10px; border-radius:999px;}
  .coins .coin-icon{font-size:14px}
  .coins .amount{color:#e63946; font-weight:800}
  .menu-btn{
    margin-left:6px; margin-right:2px;
    width:30px; height:30px; border-radius:10px; border:1px solid var(--border);
    background:#fff; display:grid; place-items:center; cursor:pointer;
  }
  .menu-btn span{font-size:18px; line-height:1}

  /* ====== 次列：分段+進度 ====== */
  .subbar{
    background:linear-gradient(0deg,#fff, #fff0);
    border-bottom:2px solid var(--brand);
    padding:10px 12px; display:flex; align-items:center; gap:10px;
  }
  .tab{
    display:flex;align-items:center;gap:6px;color:#fff;background:var(--brand);
    padding:6px 10px;border-radius:999px;font-weight:600; box-shadow:0 2px 0 rgba(0,0,0,.08);
  }
  .tab .tab-icon{filter:grayscale(.2);opacity:.9}
  .pill{
    flex:1; max-width:220px; height:28px; border-radius:999px;
    border:1px solid var(--border); background:#fff; position:relative;
    display:grid; place-items:center; font-weight:700; color:var(--muted);
  }
  .pill .fill{
    position:absolute; left:2px; top:2px; bottom:2px;
    width:50%; border-radius:999px; background:var(--chip); border:1px solid var(--border);
    transition:width .25s ease;
  }
  .pill .label{position:relative; z-index:1}
  .right-stat{margin-left:auto;color:#fff;background:var(--brand); padding:6px 10px; border-radius:999px; font-weight:600}

  /* ====== Chat 區 ====== */
  .chat{padding:12px; overflow:auto; background:#fff}
  .msg{display:grid; grid-template-columns:34px 1fr; gap:8px; margin:10px 0}
  .msg.right{grid-template-columns:1fr 34px}
  .avatar{width:34px; height:34px; border-radius:50%; background:#e5e7eb; border:1px solid #d1d5db; display:grid; place-items:center; font-size:12px;color:#9ca3af}
  .avatar.npc{background:#ffd5c7;border-color:#ffc3ae}
  .bubble{max-width:80%; padding:10px 12px; border-radius:14px; border:1px solid #e5e7eb; background:var(--bubble-left)}
  .right .bubble{justify-self:end; background:var(--bubble-right)}
  .tone{font-size:12px;color:#6b7280;margin-bottom:4px}

  /* ====== 底部工具列 ====== */
  .toolbar{
    background:#fff; border-top:1px solid #e5e7eb; padding:10px; display:flex; gap:10px; align-items:center; justify-content:space-between;
  }
  .input{flex:1; height:36px; border-radius:999px; border:1px solid #e5e7eb; padding:0 12px}
  .fab,.cta{
    width:40px;height:40px;border-radius:50%; border:1px solid #e5e7eb; background:#fff; display:grid; place-items:center
  }
  .cta{background:var(--brand); color:#fff; clip-path:polygon(50% 0%, 95% 35%, 78% 100%, 22% 100%, 5% 35%)}

  /* ====== 右側抽屜設定 ====== */
  .drawer{
    position:absolute; top:0; right:0; bottom:0; width:min(360px, 92vw);
    background:#fff; border-left:1px solid var(--border);
    transform:translateX(100%); transition:transform .28s ease; z-index:20;
    display:flex; flex-direction:column;
  }
  .drawer.open{ transform:translateX(0) }
  .drawer header{
    padding:12px; border-bottom:1px solid #eee; display:flex; align-items:center; justify-content:space-between;
    background:#fff;
  }
  .drawer .body{padding:12px; overflow:auto; background:var(--panel)}
  .fg{display:grid; grid-template-columns:110px 1fr; gap:8px; align-items:center; margin:8px 0}
  .fg label{font-weight:600}
  .fg input, .fg select{
    border:1px solid #d1d5db; border-radius:8px; padding:8px; width:100%;
  }
  .overlay{
    position:absolute; inset:0; background:rgba(0,0,0,.12); opacity:0; pointer-events:none; transition:opacity .28s ease; z-index:10;
  }
  .overlay.show{opacity:1; pointer-events:auto}
</style>
</head>
<body class="theme-orange">
  <main class="app" role="application" aria-label="地府求職模式">

    <!-- ===== Header ===== -->
    <header class="header">
      <div class="badge">
        <div class="status-icon" id="statusIcon">🌀</div>
        <div class="mode-text" id="modeText">無央保密模式</div>
      </div>

      <div class="coins">
        <span class="coin-icon" id="coinIcon">🪙</span>
        <span class="amount" id="coinAmount">999,999</span>
      </div>

      <button class="menu-btn" id="openDrawer" aria-label="開啟設定">
        <span>⋮</span>
      </button>
    </header>

    <!-- ===== Sub bar (tabs + progress) ===== -->
    <section class="subbar">
      <div class="tab"><span class="tab-icon" id="tabIcon">❖</span></div>
      <div class="stage-hint" id="tabCurrent">遊魂</div>
      <div class="stage-hint" id="tabNext">打工仔</div>
      <div class="pill" aria-label="進度">
        <div class="fill" id="pillFill" style="width:50%"></div>
        <div class="label"><span id="progressName">打工</span>：<span id="progressPct">50%</span></div>
      </div>
      <div class="right-stat" id="progressName">困惑度：50%</div>
    </section>

    <!-- ===== Chat ===== -->
    <section class="chat" aria-label="對話">
      <article class="msg">
        <div class="avatar">你</div>
        <div class="bubble">什麼年代了！還在用人工作業？生死簿不會還是用毛筆手寫的吧？</div>
      </article>
      <article class="msg right">
        <div class="bubble"><div class="tone">（興奮）</div>哇！妳怎麼知道？我們的毛筆還是用上等狼毫做的呢！</div>
        <div class="avatar npc">NPC</div>
      </article>
      <article class="msg">
        <div class="avatar">你</div>
        <div class="bubble">天啊…連 Excel 都沒有嗎？至少也要有個搜尋功能吧？</div>
      </article>
      <article class="msg right">
        <div class="bubble"><div class="tone">（嚴肅）</div>地府存在千年，不需要改變。</div>
        <div class="avatar npc">NPC</div>
      </article>
      <div style="height:24px"></div>
    </section>

    <!-- ===== Toolbar ===== -->
    <footer class="toolbar">
      <button class="fab" aria-label="新增">＋</button>
      <input class="input" placeholder="輸入訊息…" />
      <button class="cta" aria-label="特殊動作">◆</button>
    </footer>

    <!-- ===== Overlay for drawer ===== -->
    <div class="overlay" id="overlay"></div>

    <!-- ===== Drawer (設定面板) ===== -->
    <aside class="drawer" id="drawer" aria-label="設定">
      <header>
        <strong>設定</strong>
        <button id="closeDrawer" class="menu-btn" aria-label="關閉設定"><span>✕</span></button>
      </header>
      <div class="body">
        <div class="fg"><label>對話模式</label><input id="inpMode" placeholder="無央保密模式" /></div>
        <div class="fg"><label>代幣ICON</label><input id="inpCoinIcon" placeholder="🪙 或 emoji/字元" /></div>
        <div class="fg"><label>代幣數量</label><input id="inpCoinAmount" type="number" placeholder="999999" /></div>
        <div class="fg"><label>狀態ICON</label><input id="inpStatusIcon" placeholder="🌀 或 emoji/字元" /></div>
        <div class="fg"><label>目前狀態</label><input id="inpCurrent" placeholder="遊魂" /></div>
        <div class="fg"><label>下階段狀態</label><input id="inpNext" placeholder="打工" /></div>
        <div class="fg"><label>進度名稱</label><input id="inpProgName" placeholder="困惑度" /></div>
        <div class="fg"><label>百分比</label><input id="inpPct" type="number" min="0" max="100" placeholder="50" /></div>
        <div class="fg">
          <label>色調</label>
          <select id="inpTheme">
            <option value="orange" selected>橘色</option>
            <option value="blue">藍色</option>
            <option value="green">綠色</option>
            <option value="purple">紫色</option>
          </select>
        </div>
      </div>
    </aside>
  </main>

<script>
  // ===== 開關抽屜 =====
  const drawer = document.getElementById('drawer');
  const overlay = document.getElementById('overlay');
  const openBtn = document.getElementById('openDrawer');
  const closeBtn = document.getElementById('closeDrawer');
  function openDrawer(){ drawer.classList.add('open'); overlay.classList.add('show'); }
  function closeDrawer(){ drawer.classList.remove('open'); overlay.classList.remove('show'); }
  openBtn.addEventListener('click', openDrawer);
  closeBtn.addEventListener('click', closeDrawer);
  overlay.addEventListener('click', closeDrawer);

  // ===== 綁定 UI 元件 =====
  const elModeText = document.getElementById('modeText');
  const elCoinIcon = document.getElementById('coinIcon');
  const elCoinAmount = document.getElementById('coinAmount');
  const elStatusIcon = document.getElementById('statusIcon');
  const elTabIcon = document.getElementById('tabIcon');
  const elTabCurrent = document.getElementById('tabCurrent');
  const elTabNext = document.getElementById('tabNext');
  const elProgName = document.getElementById('progressName');
  const elProgPctText = document.getElementById('progressPct');
  const elPillFill = document.getElementById('pillFill');

  // 設定輸入
  const inpMode = document.getElementById('inpMode');
  const inpCoinIcon = document.getElementById('inpCoinIcon');
  const inpCoinAmount = document.getElementById('inpCoinAmount');
  const inpStatusIcon = document.getElementById('inpStatusIcon');
  const inpCurrent = document.getElementById('inpCurrent');
  const inpNext = document.getElementById('inpNext');
  const inpProgName = document.getElementById('inpProgName');
  const inpPct = document.getElementById('inpPct');
  const inpTheme = document.getElementById('inpTheme');
  const elStageHint = document.getElementById('stageHint');

  // ===== 直接套用（即時更新） =====
  function apply(){
    if (inpMode.value) elModeText.textContent = inpMode.value;
    if (inpCoinIcon.value) elCoinIcon.textContent = inpCoinIcon.value;
    if (inpCoinAmount.value !== '') elCoinAmount.textContent = Number(inpCoinAmount.value).toLocaleString();
    if (inpStatusIcon.value){ elStatusIcon.textContent = inpStatusIcon.value; elTabIcon.textContent = inpStatusIcon.value; }
    if (inpCurrent.value) elTabCurrent.textContent = inpCurrent.value;
    if (inpNext.value){
      const pct = (inpPct.value === '' ? elProgPctText.textContent.replace('%','') : inpPct.value);
      elTabNext.textContent = `${inpNext.value}：${pct}%`;
    }
    if (inpProgName.value) elProgName.textContent = inpProgName.value;
    if (inpPct.value !== ''){
      const v = Math.max(0, Math.min(100, Number(inpPct.value)));
      elProgPctText.textContent = `${v}%`;
      elPillFill.style.width = `${v}%`;
      // 若右側統計使用同一百分比，同步更新：
      const nextLabel = (inpNext.value || elTabNext.textContent.split('：')[0]);
      elTabNext.textContent = `${nextLabel}：${v}%`;
      elStageHint.textContent = `${nextLabel}`;
    }
    // 主題
    const body = document.body;
    body.classList.remove('theme-orange','theme-blue','theme-green','theme-purple');
    body.classList.add(`theme-${inpTheme.value}`);
  }

  // 即時監聽
  [inpMode, inpCoinIcon, inpCoinAmount, inpStatusIcon, inpCurrent, inpNext, inpProgName, inpPct, inpTheme]
    .forEach(el => el.addEventListener('input', apply));

  // 預設同步一次（如果有 placeholder 以外的預設值）
  apply();
</script>
</body>
</html>
